# Gitチュートリアル

0. [基本のシェルコマンド](#基本のシェルコマンド)

1. [Gitの基本コマンド](#gitの基本コマンド)

1. [ユーザー情報を登録しよう](#ユーザー情報を登録しよう)

1. [リポジトリの作成しよう](#リポジトリの作成しよう)

1. [リポジトリにファイルを追加してみよう](#リポジトリにファイルを追加してみよう)

1. [作業履歴を確認してみよう](#作業履歴を確認してみよう)

1. [作業履歴を取り消そう](#作業履歴を取り消そう)

1. [ブランチを作って作業しよう](#ブランチを作って作業しよう)


<br>

## 基本のシェルコマンド
シェルとは、UNIXなどのOSで使用されるコマンドインタプリタのこと

UNIXとは、1969年に米国AT&Tのベル研究所で、Dennis RitchieとKen Thompsonによって開発が開始されたOSのこと

インタプリタとは、一般的に利用者が打ち込む指令（コマンド）を読み込み／解釈して、それに応じた動作を実行するプログラム

### コマンド一覧<br>

カレントディレクトリ(現在自分いるフォルダ)を表示する<br>
```
pwd
```
ファイル一覧を表示する<br>
```
ls
```
隠しファイル(普段は表示されないファイル)も含めて、ファイル一覧を表示する
```
ls -a
```

ディレクトリ(フォルダ)の作成コマンド
```
mkdir ディレクトリの名前
```

ディレクトリ(フォルダ)の移動コマンド
```
cd 移動したいフォルダ名
```
ひとつ上のフォルダに移動したいとき
```
cd ..
```

## Gitの基本コマンド
Gitコマンドの簡易ヘルプ(一覧など)が表示されるコマンド
```
git
```
Gitのバージョンを表示する
```
git --version
```

## ユーザー情報を登録しよう
Gitを使うには、名前とメールアドレスの登録が必要
```
git config --global user.name "名前"
git config --global user.email "メールアドレス"
```
登録情報を確認
```
git config --list
```

## リポジトリの作成しよう
リポジトリとは、データの保管庫

1. Gitにアップロードしたい大元のディレクトリ(フォルダ)に移動
1. git initで隠しディレクトリ(.git)を作成＆初期化
```
git init
``` 

## リポジトリにファイルを追加してみよう

### ファイルの追加手順
![ファイルの追加手順](../images/Git%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E8%BF%BD%E5%8A%A0%E6%89%8B%E9%A0%86.PNG)

リポジトリやステージングエリアの状態を確認する
```
git status
```
git statusで表示される情報の見方
```
Changes to be committed
(コミットする予定の変更したファイル(ステージングエリアに反映されているファイル))

Changes not staged for commit
(まだステージングエリアに追加されていない、変更したファイル)

Untracked files
(Git でまだ管理されていないファイル(新しく追加したファイル))
```

Gitでのファイル状態の流れ
![ファイル状態の流れ](../images/%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E7%8A%B6%E6%85%8B%E3%81%AE%E6%B5%81%E3%82%8C.PNG)

( modified = 変更 )

<br>

ステータスをシンプルな形式で表示する
```
git status -s
```
ステージングエリアに仮登録する
```
git add ファイル名
```
[git add コマンドの派生](https://note.nkmk.me/git-add-u-a-period/)

ステージングエリアの内容をコミットする<br>
コミットとは、処理や変更などを確定させる、反映させること
```
git commit
```
git commitコマンドを入力するとvimが起動するので、コミットメッセージを入力する
### Vimとは
Vimは、「ターミナル(CLI)から操作するテキストエディタ」<br>
<b>GUIとCLI</b><br>

![GUI&CLI](../images/GUI%26CLI.png)

### Vimの使い方
1. <b>i</b>で入力モードに切り替える<br>
1. コミットメッセージを入力する<br>
1. Esc(エスケープキー)で選択モードに切り替える<br>
1. <b>:wq</b>で保存して終了<br>
(中断する場合は、<b>:q!</b>)<br>

Vimの基本操作は[ここ](https://qiita.com/Adan2JP/items/7c0bb0d81759a1da77f4)から

Vimを開かずにコミットする方法
```
git commit -m "コミットメッセージ"
```

仮登録とコミットを同時にする方法
```
git commit -a
```
仮登録とVimを開かずにコミットをする方法
```
git commit -a -m "コミットメッセージ"
```

## 作業履歴を確認してみよう

コミット履歴を確認する
```
git log
```
git logで表示される情報の見方<br>
```
commit 英数字の羅列(コミットのハッシュ値)
(ハッシュ値とは、元になるデータから一定の計算手順により求められた固定長の値)
Author: コミット者
Date: コミット日時
コミットメッセージ
```

コミットメッセージだけ表示する場合
```
git log --oneline
```
指定した件数だけコミットログを表示する場合
```
git log -n (nは表示したい件数)
```
ステージングとワーキングディレクトリを比較する
```
git diff
```

### git diffとは

git diffとは、指定したコミットやファイルの違い（差分）を表示するコマンドです。

git diff の見方
1. 比較の入力

```
diff --git a/〇〇(比較元ファイル) b/〇〇 (比較対象ファイル)
```
2. メタデータ(この情報が必要になることはほぼない)

```
index 英数字の羅列
```
3. 変更箇所のマーカー<br>
```
--- a/〇〇
+++ b/〇〇
```
比較元（変更前）のファイルで変化があった箇所を「-」で表し、比較先（変更後）のファイルで変化があった箇所を「+」で表すという意味です。<br><br>

4. diff チャンク

チャンクとは、大きなデータを分割して制御情報を付加したひとまとまりの断片などのこと

diff 出力のその他の部分は diff の「チャンク」の一覧です。<br>
diff ではファイルで変更されたセクションだけが表示されます。

セクションとは、「開始」から「終了」までのこと<br><br>

```
@@ -x1,y1 +x2,y2 @@
```
ファイルの中のｘ行目から、ｙ行分を表示するという意味です。<br>
すなわち変更前のｘ1行目からｙ1行分の表示と、変更後のｘ２行目からｙ２行分を表示していることを表している。<br><br>

```
+oooo
-xxxx
```
<b>ファイルの変更点</b><br>
　「+」 : 追加された内容<br>
　「-」 : 削除された内容<br>
<br>

最新コミットとステージングエリアを比較する
```
git diff --cached
```
最新のコミットとワーキングディレクトリを比較する
```
git diff HEAD
```
git diff コマンドの種類と比較するファイル
![git diff](../images/git%20diff.PNG)

## 作業履歴を取り消そう

ステージング上の特定ファイルをひとつ前の状態に戻す
```
git reset ファイル名
```
今行ったこと
![git reset before](../images/git%20reset%20before.PNG)
⇩
![git reset after](../images/git%20reset%20after.PNG)

ワーキングディレクトリのファイルを前の状態に戻す
```
git checkout ファイル名
```
今行ったこと
![git checkout before](../images/git%20checkout%20before.PNG)
⇩
![git checkout after](../images/git%20checkout%20after.PNG)

最新のコミットを打ち消す
```
git revert HEAD
```
今行ったこと
![git revert](../images/git%20revert.PNG)

<br><br>

## ブランチを作って作業しよう

### ブランチとは
作業内容に合わせてリポジトリを分岐する機能です。<br>
ブランチを使うと、機能の追加やバグの修正といった作業内容を、リポジトリにまとめることが簡単にできます。<br>
(デフォルトでは、「main」というブランチが用意されています。)

### ブランチを使う目的
* 公開中のプログラムのバグ修正＆新規機能実装
![git branch can](../images/git%20branch%20can.PNG)

ブランチを確認する
```
git branch
```
ブランチを作る
```
git branch ブランチ名
```
ブランチを切り替える
```
git checkout ブランチ名
```
ブランチを作って、そのブランチに切り替える
```
git checkout -b ブランチ名
```

新しく作ったブランチにファイルを追加して、コミットしてみよう<br>
ブランチをmainに戻して、違い見比べよう<br>

ブランチをmainにマージしよう
```
git checkout main
git merge マージしたいブランチ名
```

ブランチを削除しよう
```
git branch -d 削除したいブランチ名
```

### コンフリクトを起こそう
コンフリクト = 衝突

1. 新しく作ったブランチを作成
1. そのブランチでファイルを変更＆コミット
1. mainに戻って、新しく作ったブランチで変更したファイルと同じファイルに変更を加えコミット
1. mainに新しく作ったブランチをマージ<br>
マージした時に以下の状態になればOK
```
CONFLICT (content): Merge conflict in ファイル名
```
コンフリクト(衝突)の状態を確認
```
git status

Unmerged paths:
  (use "git add <file>..." to mark resolution)
        both modified:   ファイル名
```

### 衝突個所の表示<br>
[箇所と個所の違い](https://meaning.jp/posts/411)<br>
衝突が起こっているファイルを開く<br>
衝突個所の見方
```
<<<<<<< HEAD
    <p>ここはmainです。</p>
=======
    <p>ここは新規作成ブランチです。</p>
>>>>>>> マージしているブランチ名
```
= で区切られている上がmainの変更点<br>
= で区切られている下がマージしているブランチの変更点<br>

<b>修正するには、どちらかを選ぶか、新しいコードを記述する</b><br>(この時、不等号やイコールの行は削除する)<br>

修正したら、仮登録してコミットしよう
```
git add 変更ファイル名
git commit
```

※コンフリクトを解消しても新しく作成した方のブランチには反映されないから注意
